<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>:wq by Wuqiong Zhao</title>
    <meta name="description" content="A Vim-inspired page by Wuqiong Zhao, showing my initials in the command :wq.">
    <meta name="author" content="Wuqiong Zhao">
    <meta property="og:title" content=":wq by Wuqiong Zhao">
    <meta property="og:description" content="A Vim-inspired page by Wuqiong Zhao, showing my initials in the command :wq.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://wq.wqzhao.org">
    <link rel="icon" href="/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* * VIM-like styling for the page
         * Theme inspired by Dracula
         */
        :root {
            --bg-color: #282a36;
            --fg-color: #f8f8f2;
            --comment-color: #6272a4;
            --link-color: #8be9fd;
            --cursor-color: #f8f8f2;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--fg-color);
            font-family: 'Fira Code', monospace;
            font-size: 16px;
            overflow: hidden; /* Prevents scrollbars from appearing */
        }

        body {
            display: flex;
            flex-direction: column;
        }

        /* Main content area */
        .vim-content {
            flex-grow: 1;
            padding: 10px;
            white-space: pre; /* Use pre for consistent line rendering */
            overflow-y: hidden; /* Hide overflow, as we manage it */
        }

        .line {
            display: block; /* Each line is a block element */
            height: 1.2em; /* Set a consistent line height */
        }

        .line-number {
            color: var(--comment-color);
            display: inline-block;
            width: 2em;
            text-align: right;
            margin-right: 15px;
            user-select: none; /* Prevent selection of line numbers */
        }

        .tilde {
            color: var(--comment-color);
            user-select: none;
        }
        
        a {
            color: var(--link-color);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Command line at the bottom */
        .vim-command-line {
            padding: 4px 10px;
            white-space: nowrap;
            font-weight: bold;
        }

        /* Blinking cursor effect */
        .cursor {
            display: inline-block;
            width: 0.5em;
            height: 1em;
            background-color: var(--cursor-color);
            animation: blink 1s steps(1) infinite;
            vertical-align: text-bottom;
        }

        @keyframes blink {
            50% {
                background-color: transparent;
            }
        }
    </style>
</head>
<body>

    <!-- This div represents the main text area of the Vim editor -->
    <div class="vim-content" id="vim-content">
        <!-- Content will be generated by JavaScript -->
    </div>

    <!-- This div represents the command line at the bottom -->
    <div class="vim-command-line">
        <span>:wq</span><span class="cursor"></span>
    </div>

    <script>
        // This script dynamically fills the page with line numbers and tildes
        // to ensure it always fills the screen, regardless of window size.

        const contentDiv = document.getElementById('vim-content');

        // Define the static content that will always be at the top.
        const staticContent = [
            `<span># Welcome to wq.wqzhao.org</span>`,
            `<span></span>`, // Blank line
            `<span>## About Me</span>`,
            `<span>- Name: Wuqiong Zhao</span>`,
            `<span>- Website: </span><a href="https://wqzhao.org" target="_blank">https://wqzhao.org</a>`,
            `<span></span>`, // Blank line
            `<span>## Inspiration</span>`,
            `<span>- This page's design is inspired by the classic Vim text editor.</span>`,
            `<span>- The command ':wq' (write & quit) also happens to match my initials.</span>`,
            `<span></span>`, // Blank line
        ];

        function populateLines() {
            // Clear existing content
            contentDiv.innerHTML = '';

            // Calculate line height from CSS
            const singleLine = document.createElement('div');
            singleLine.classList.add('line');
            singleLine.style.visibility = 'hidden';
            contentDiv.appendChild(singleLine);
            const lineHeight = singleLine.offsetHeight;
            contentDiv.removeChild(singleLine);

            if (lineHeight === 0) return; // Avoid division by zero

            // Get the container height before using it in calculations.
            const containerHeight = contentDiv.clientHeight;

            // Calculate total lines that can fit. Math.floor prevents partial lines.
            const totalLines = Math.floor(containerHeight / lineHeight);

            let lineCount = 1;

            // Add the static content first
            staticContent.forEach(content => {
                if (lineCount <= totalLines) {
                    const line = document.createElement('div');
                    line.classList.add('line');
                    line.innerHTML = `<span class="line-number">${lineCount}</span>${content}`;
                    contentDiv.appendChild(line);
                    lineCount++;
                }
            });

            // Fill the rest of the space with tildes
            while (lineCount <= totalLines) {
                const line = document.createElement('div');
                line.classList.add('line');
                line.innerHTML = `<span class="line-number">${lineCount}</span><span class="tilde">~</span>`;
                contentDiv.appendChild(line);
                lineCount++;
            }
        }

        // Populate lines on initial load
        window.onload = populateLines;

        // Repopulate lines when the window is resized
        window.onresize = populateLines;
    </script>

</body>
</html>
